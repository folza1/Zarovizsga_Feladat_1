<!DOCTYPE html>
<html>
<head>
    <title>Page Title</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>

<style>
    .progress-bar {
        height: 2px;
        background-color: red;
        width: 0%;
    }
</style>

<div class="border m-4 p-4 w-1/2 mx-auto rounded">
    <p class="text-center font-bold text-3xl">Szavazzon!</p>
    <p class="text-center font-bold text-xl">Ki fogja nyerni a következő tenisztornát?</p>

    <div>
        <form id="szavazasForm" action="/" method="post">

            <p class="font-bold text-xl">Válassz teniszezőt:</p>
            <label>
                <input type="radio" name="teniszezo" value="djokovic" required> Djokovic Novak
            </label>
            <div class="progress-bar" id="djokovic_progress"></div>
            <br>
            <label>
                <input type="radio" name="teniszezo" value="alcaraz" required> Alcaraz Carlos
            </label>
            <div class="progress-bar" id="alcaraz_progress"></div>
            <br>
            <label>
                <input type="radio" name="teniszezo" value="medvedev" required> Medvedev Daniil
            </label>
            <div class="progress-bar" id="medvedev_progress"></div>
            <br>
            <label>
                <input type="radio" name="teniszezo" value="sinner" required> Sinner Jannik
            </label>
            <div class="progress-bar" id="sinner_progress"></div>
            <br>

            <button class="border bg-red-500 p-2" type="button" onclick="feldolgozas()" id="szavazasGomb" disabled>Szavazás</button>
        </form>
    </div>
    <p>Összes szavazat: <span id="osszesSzavazat">0</span></p>
    <p>Djokovic szavazatok: <span id="djokovicSzavazatok">0</span></p>
    <p>Alcaraz szavazatok: <span id="alcarazSzavazatok">0</span></p>
    <p>Medvedev szavazatok: <span id="medvedevSzavazatok">0</span></p>
    <p>Sinner szavazatok: <span id="sinnerSzavazatok">0</span></p>
</div>

<script>
    var radioButtons = document.querySelectorAll('input[name="teniszezo"]');
    var szavazasGomb = document.getElementById('szavazasGomb');
    var osszesSzavazatElem = document.getElementById('osszesSzavazat');
    var djokovicSzavazatokElem = document.getElementById('djokovicSzavazatok');
    var alcarazSzavazatokElem = document.getElementById('alcarazSzavazatok');
    var medvedevSzavazatokElem = document.getElementById('medvedevSzavazatok');
    var sinnerSzavazatokElem = document.getElementById('sinnerSzavazatok');
    var progressBars = document.querySelectorAll('.progress-bar');

    radioButtons.forEach(function(radioButton) {
        radioButton.addEventListener('change', function() {
            szavazasGomb.disabled = false;
        });
    });

    var all_votes = 0;
    var djokovic = 0;
    var alcaraz = 0;
    var medvedev = 0;
    var sinner = 0;

    function feldolgozas() {
        all_votes++;
        osszesSzavazatElem.innerText = all_votes;

        var selectedRadio = document.querySelector('input[name="teniszezo"]:checked');
        if (selectedRadio) {
            var selectedValue = selectedRadio.value;
            switch (selectedValue) {
                case 'djokovic':
                    djokovic++;
                    djokovicSzavazatokElem.innerText = djokovic;
                    break;
                case 'alcaraz':
                    alcaraz++;
                    alcarazSzavazatokElem.innerText = alcaraz;
                    break;
                case 'medvedev':
                    medvedev++;
                    medvedevSzavazatokElem.innerText = medvedev;
                    break;
                case 'sinner':
                    sinner++;
                    sinnerSzavazatokElem.innerText = sinner;
                    break;
            }
            updateProgressBars();
        }
    }

    function updateProgressBars() {
        progressBars.forEach(function(bar) {
            var votes = 0;
            switch (bar.id) {
                case 'djokovic_progress':
                    votes = djokovic;
                    break;
                case 'alcaraz_progress':
                    votes = alcaraz;
                    break;
                case 'medvedev_progress':
                    votes = medvedev;
                    break;
                case 'sinner_progress':
                    votes = sinner;
                    break;
            }
            var percentage = (votes / all_votes) * 100;
            bar.style.width = percentage + '%';
        });
    }
</script>

</body>
</html>
